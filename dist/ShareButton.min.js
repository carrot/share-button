!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.ShareButton=t()}(this,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e,t,n;return n=function(e){return function(n){var i,o;i=t.className.split(/\s+/),o=i.indexOf(n),e(i,o,n),t.className=i.join(" ")}},t=this,e={add:n(function(e,t,n){~t||e.push(n)}),remove:n(function(e,t){~t&&e.splice(t,1)}),toggle:n(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}},Object.defineProperty(e,"length",{get:function(){return t.className.split(/\s+/).length}}),e}}),void 0===NodeList.prototype[Symbol.iterator]&&(NodeList.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{done:t>=e.length,value:e.item(t++)}}}});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,[{key:"_hide",value:function(e){e.style.display="none"}},{key:"_show",value:function(e){e.style.display="block"}},{key:"_hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"_addClass",value:function(e,t){e.classList.add(t)}},{key:"_removeClass",value:function(e,t){e.classList.remove(t)}},{key:"_isEncoded",value:function(e){return e=e.toRFC3986(),decodeURIComponent(e)!==e}},{key:"_encode",value:function(e){return"undefined"==typeof e||null===e||this._isEncoded(e)?encodeURIComponent(e):e.toRFC3986()}},{key:"_getUrl",value:function(e){var t=this,n=(void 0===arguments[1]?!1:arguments[1],void 0===arguments[2]?{}:arguments[2]),i=function(){var e=[],i=!0,o=!1,r=void 0;try{for(var a,s=Object.keys(n)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,c=n[l];e.push(""+l+"="+t._encode(c))}}catch(u){o=!0,r=u}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return e.join("&")}();return i&&(i="?"+i),e+i}},{key:"_updateHref",value:function(e,t,n){var i=t.indexOf("mailto:")>=0,o=e.getElementsByTagName("a")[0];o.setAttribute("href",this._getUrl(t,!i,n));var r={width:500,height:350};r.top=screen.height/2-r.height/2,r.left=screen.width/2-r.width/2,i||window.open(o.href,"targetWindow","\n          toolbar=no,\n          location=no,\n          status=no,\n          menubar=no,\n          scrollbars=yes,\n          resizable=yes,\n          left="+r.left+",\n          top="+r.top+",\n          width="+r.width+",\n          height="+r.height+"\n        ")}},{key:"popup",value:function t(e){var n=this,i=void 0===arguments[1]?{}:arguments[1],t={width:500,height:350};t.top=screen.height/2-t.height/2,t.left=screen.width/2-t.width/2;var o=function(){var e=[],t=!0,o=!1,r=void 0;try{for(var a,s=Object.keys(i)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value,c=i[l];e.push(""+l+"="+n._encode(c))}}catch(u){o=!0,r=u}finally{try{!t&&s["return"]&&s["return"]()}finally{if(o)throw r}}return e.join("&")}();o&&(o="?"+o),window.open(e+o,"targetWindow","\n        toolbar=no,\n        location=no,\n        status=no,\n        menubar=no,\n        scrollbars=yes,\n        resizable=yes,\n        left="+t.left+",\n        top="+t.top+",\n        width="+t.width+",\n        height="+t.height+"\n      ")}},{key:"_merge",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){"object"!=typeof e&&(e={});for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if("object"==typeof i){e[n]=this._merge(e[n],i);continue}e[n]=i}for(var o=2,r=arguments.length;r>o;o++)_merge(e,arguments[o]);return e})},{key:"_objToArray",value:function(e){var t=[];for(var n in e)"object"==typeof e[n]&&t.push(e[n]);return t}},{key:"_isMobile",value:function(){return navigator.userAgent.match(/Android|iPhone/i)&&!navigator.userAgent.match(/iPod|iPad/i)?!0:!1}}]),e}();String.prototype.toRFC3986=function(){var e=encodeURIComponent(this);e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,a=n;s=c=l=void 0,i=!1;var s=Object.getOwnPropertyDescriptor(o,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=r,n=a,i=!0}},l=function(e){function t(e,n){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),"object"==typeof e?(this.element=void 0,n=e):this.element=e,this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabledNetworks:0,protocol:"//",url:window.location.href,caption:null,title:this._defaultTitle(),image:this._defaultImage(),description:this._defaultDescription(),ui:{flyout:"top center",buttonText:"Share",buttonFont:!0,iconFont:!0,css:!0,collision:!1},networks:{googlePlus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,loadSdk:!0,url:null,appId:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},reddit:{enabled:!0,url:null,title:null},linkedin:{enabled:!0,url:null,title:null,description:null},whatsapp:{enabled:!0,description:null,url:null},email:{enabled:!0,title:null,description:null}}},this.listener=null,this._setup(this.element,n)}return o(t,e),r(t,[{key:"open",value:function(){this._public("Open")}},{key:"close",value:function(){this._public("Close")}},{key:"toggle",value:function(){this._public("Toggle")}},{key:"toggleListen",value:function(){this._public("Listen")}},{key:"_public",value:function(e){var n=void 0;n="undefined"==typeof element?s(Object.getPrototypeOf(t.prototype),"_objToArray",this).call(this,document.getElementsByTagName("share-button")):document.querySelectorAll(element);var i=!0,o=!1,r=void 0;try{for(var a,l=n[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,u=c.getElementsByClassName("social")[0],d=c.querySelectorAll("label")[0];this["_event"+e](u,d)}}catch(f){o=!0,r=f}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw r}}}},{key:"_setup",value:function(e,n){var i=void 0;i="undefined"==typeof e?s(Object.getPrototypeOf(t.prototype),"_objToArray",this).call(this,document.getElementsByTagName("share-button")):document.querySelectorAll("share-button"+e),this._merge(this.config,n),this.config.networks.whatsapp.enabled&&!this._isMobile()&&(this.config.networks.whatsapp.enabled=!1),this._detectNetworks(),this._normalizeNetworkConfiguration(),this.config.ui.defaultStyles&&this._injectStylesheet("dist/styles.min.css"),this.config.networks.facebook.enabled&&this.config.networks.facebook.loadSdk&&this._injectFacebookSdk();var o=0,r=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;this._setupInstance(d,o++)}}catch(f){a=!0,l=f}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw l}}}},{key:"_setupInstance",value:function(e,t){var n=this;this._hide(e),this._addClass(e,"sharer-"+t),this._injectHtml(e),this.config.ui.css&&this._injectStylesheet("dist/styles.min.css"),this._show(e);var i=e.getElementsByTagName("label")[0],o=e.getElementsByClassName("social")[0],r=e.getElementsByTagName("li");this._addClass(o,"networks-"+this.config.enabledNetworks),i.addEventListener("click",function(){return n._eventToggle(o,i)});var a=function(t){var i=r[t];"undefined"!=typeof i&&!function(){i.style.display=n.config.networks[i.getAttribute("data-network")].display;var t=i.getAttribute("data-network"),o=i.getElementsByTagName("a")[0];"paper-plane"!==i.className&&o.setAttribute("onclick","return false"),o.addEventListener("mousedown",function(){n._hook("before",t,e)}),o.addEventListener("mouseup",function(){n["_network"+t.capitalizeFirstLetter()](i)}),o.addEventListener("click",function(){n._hook("after",t,e)})}()};for(var s in Object.keys(r))a(s)}},{key:"_eventToggle",value:function(e,t){this._hasClass(e,"active")?this._eventClose(e):this._eventOpen(e,t)}},{key:"_eventOpen",value:function(e,t){this._hasClass(e,"load")&&this._removeClass(e,"load"),this._collisionDetection(e,t),this._addClass(e,"active")}},{key:"_eventClose",value:function(e){this._removeClass(e,"active")}},{key:"_eventListen",value:function(e,t){var n=this,i=this._getDimensions(e,t);null===this.listener?this.listener=window.setInterval(function(){return n._adjustClasses(e,t,i)},100):(window.clearInterval(this.listener),this.listener=null)}},{key:"_collisionDetection",value:function(e,t){var n=this,i=this._getDimensions(e,t);this._adjustClasses(e,t,i),e.classList.contains("clicked")||(window.addEventListener("scroll",function(){return n._adjustClasses(e,t,i)}),window.addEventListener("resize",function(){return n._adjustClasses(e,t,i)}),e.classList.add("clicked"))}},{key:"_getDimensions",value:function(e,t){return{labelWidth:t.offsetWidth,labelHeight:t.offsetHeight,buttonWidth:e.offsetWidth}}},{key:"_adjustClasses",value:function(e,t,n){var i=window.innerWidth,o=window.innerHeight,r=t.getBoundingClientRect().left+n.labelWidth/2,a=i-r,s=(e.getBoundingClientRect().left+n.buttonWidth/2,t.getBoundingClientRect().top+n.labelHeight/2),l=this._findLocation(r,s,i,o);if("middle"===l[1]&&"center"!==l[0]&&("left"===l[0]&&i<=r+220+n.buttonWidth/2||"right"===l[0]&&i<=a+220+n.buttonWidth/2))e.classList.add("top"),e.classList.remove("middle","bottom");else{switch(l[1]){case"top":e.classList.add("bottom"),e.classList.remove("middle","top");break;case"middle":e.classList.add("middle"),e.classList.remove("top","bottom");break;case"bottom":e.classList.add("top"),e.classList.remove("middle","bottom")}switch(l[0]){case"left":e.classList.add("right"),e.classList.remove("center","left");break;case"center":e.classList.add("center","top"),e.classList.remove("left","right","middle");break;case"right":e.classList.add("left"),e.classList.remove("center","right")}}}},{key:"_findLocation",value:function(e,t,n,i){var o=["left","center","right"],r=["top","middle","bottom"],a=Math.trunc(3*(1-(n-e)/n)),s=Math.trunc(3*(1-(i-t)/i));return a>=3?a=2:-1>=a&&(a=0),s>=3?s=2:-1>=s&&(s=0),[o[a],r[s]]}},{key:"_networkFacebook",value:function(e){return this.config.networks.facebook.loadSdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this._updateHref(e,"https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})}},{key:"_networkTwitter",value:function(e){this._updateHref(e,"https://twitter.com/intent/tweet",{text:this.config.networks.twitter.description,url:this.config.networks.twitter.url})}},{key:"_networkGooglePlus",value:function(e){this._updateHref(e,"https://plus.google.com/share",{url:this.config.networks.googlePlus.url})}},{key:"_networkPinterest",value:function(e){this._updateHref(e,"https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})}},{key:"_networkLinkedin",value:function(e){this._updateHref(e,"https://www.linkedin.com/shareArticle",{mini:"true",url:this.config.networks.linkedin.url,title:this.config.networks.linkedin.title,summary:this.config.networks.linkedin.description})}},{key:"_networkEmail",value:function(e){this._updateHref(e,"mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})}},{key:"_networkReddit",value:function(e){this._updateHref(e,"http://www.reddit.com/submit",{url:this.config.networks.reddit.url,title:this.config.networks.reddit.title})}},{key:"_networkWhatsapp",value:function(e){this._updateHref(e,"whatsapp://send",{text:this.config.networks.whatsapp.description+" "+this.config.networks.whatsapp.url})}},{key:"_injectStylesheet",value:function(e){if(!this.el.head.querySelector("link[href='"+e+"']")){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),this.el.head.appendChild(t)}}},{key:"_injectHtml",value:function(e){e.innerHTML="<label class='export'><span>"+this.config.ui.buttonText+"</span></label><div class='social load "+this.config.ui.flyout+"'><ul><li class='pinterest' data-network='pinterest'><a></a></li><li class='twitter' data-network='twitter'><a></a></li><li class='facebook' data-network='facebook'><a></a></li><li class='whatsapp' data-network='whatsapp'><a></a></li><li class='gplus' data-network='googlePlus'><a></a></li><li class='reddit' data-network='reddit'><a></a></li><li class='linkedin' data-network='linkedin'><a></a></li><li class='paper-plane' data-network='email'><a></a></li></ul></div>"}},{key:"_injectFacebookSdk",value:function(){if(!window.FB&&this.config.networks.facebook.appId&&!this.el.body.querySelector("#fb-root")){var e=document.createElement("script");e.text="window.fbAsyncInit=function(){FB.init({appId:'"+this.config.networks.facebook.appId+"',status:true,xfbml:true})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src='//connect.facebook.net/en_US/all.js';i.parentNode.insertBefore(r,i)})(document,'script','facebook-jssdk');";var t=document.createElement("div");t.id="fb-root",this.el.body.appendChild(t),this.el.body.appendChild(e)}}},{key:"_hook",value:function(e,t,n){var i=this.config.networks[t][e];if("function"==typeof i){var o=i.call(this.config.networks[t],n);void 0!==o&&(o=this._normalizeFilterConfigUpdates(o),this.extend(this.config.networks[t],o,!0),this._normalizeNetworkConfiguration())}}},{key:"_defaultTitle",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?e.getAttribute("content"):(e=document.querySelector("title"))?e.innerText:void 0}},{key:"_defaultImage",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?e.getAttribute("content"):void 0}},{key:"_defaultDescription",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?e.getAttribute("content"):""}},{key:"_detectNetworks",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=Object.keys(this.config.networks)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,a=void 0,s=!0,l=!1,c=void 0;try{for(var u,d=Object.keys(this.config.networks[r])[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;null===this.config.networks[r][f]&&(this.config.networks[r][f]=this.config[f])}}catch(h){l=!0,c=h}finally{try{!s&&d["return"]&&d["return"]()}finally{if(l)throw c}}this.config.networks[r].enabled?(a="block",this.config.enabledNetworks+=1):a="none",this.config.networks[r].display=a}}catch(h){t=!0,n=h}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw n}}}},{key:"_normalizeNetworkConfiguration",value:function(){this.config.networks.facebook.appId||(this.config.networks.facebook.loadSdk=!1),this.config.networks.twitter.description&&(this._isEncoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description))),"number"==typeof this.config.networks.facebook.appId&&(this.config.networks.facebook.appId=this.config.networks.facebook.appId.toString())}},{key:"_normalizeFilterConfigUpdates",value:function(e){return this.config.networks.facebook.appId!==e.appId&&(console.warn("You are unable to change the Facebook appId after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),this.config.networks.facebook.loadSdk!==e.loadSdk&&(console.warn("You are unable to change the Facebook loadSdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),e}}]),t}(a);return l});